<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
-->

<html>
  <head>
    <title>Presentation</title>

    <meta charset='utf-8'>
    <script src='http://html5slides.googlecode.com/svn/trunk/slides.js'></script>
  </head>
  
  <style>
    /* Your individual styles here, or just use inline styles if that’s
       what you want. */
    
    
  </style>

  <body style='display: none'>

    <section class='slides layout-regular'>
      
      <!-- Your slides (<article>s) go here. Delete or comment out the
           slides below. -->

      <article>
        <h1>
          JCov: Javascript Test Coverage with Ruby
        </h1>
        <p>
          <br>
          Doug McInnes
          <br>
          YP.com
          <br>
          @DougMcInnes
          <br>
          <a href="http://dougmcinnes.com">dougmcinnes.com</a>
        </p>
      </article>

      <article>
        <h2>
          Yellowpages.com
        </h2>
      </article>

      <article>
        <h2>
          A Very (very) Large Ruby on Rails App
        </h2>
      </article>

      <article>
        <h2>
          RSpec
        </h2>
      </article>

      <article>
        <h2>
          Ratio Javascript : Ruby =~ 0.8
        </h2>
      </article>

      <article>
        <h2>
          8 lines of Javascript For every 10 lines of Ruby Code
        </h2>
      </article>

      <article>
        <h2>
          Javascript is Code too!
        </h2>
      </article>

      <article>
        <h2>
          JCov
        </h2>
      </article>

      <article>
        <h2>
          Headless
        </h2>
      </article>

      <article>
        <h2>
          FAST
        </h2>
        <h3>
          TheRubyRacer (Ruby/V8)
        </h3>
      </article>

      <article>
        <h2>
          Test Framework Agnostic
        </h2>
      </article>

      <article>
        <h2>
          Code Coverage!
        </h2>
      </article>

      <article>
        <h3>
          How does it work?
        </h3>
<pre>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;File.load()&nbsp;+-------&gt;&nbsp;RKelly&nbsp;parse
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+-------+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;render&nbsp;back&nbsp;to&nbsp;Javascript
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(with&nbsp;line&nbsp;callbacks)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+
&nbsp;&nbsp;&nbsp;&nbsp;Ruby&nbsp;Land&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
&nbsp;&nbsp;&lt;---------------------|--------------|--------------------&gt;
&nbsp;&nbsp;&lt;---------------------|--------------|--------------------&gt;
&nbsp;&nbsp;&nbsp;&nbsp;Javascript&nbsp;Land&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;load(...)+--+&nbsp;&lt;------------+

</pre>
        
        <p>
          Made with <a href="http://www.asciiflow.com/">http://www.asciiflow.com/</a>
        </p>
      </article>

      <article>
        <h3>
          And now some code
        </h3>
        <section>
        <pre>
// mean.js

Math.mean = function (array) {
  var sum = 0;
  for (var i = 0; i < array.length; i++) {
    sum += array[i];
  }

  return sum / array.length;
};
</pre>
        </section>
      </article>

      <article>
        <h3>
          And the test!
        </h3>
        <section>
        <pre>
describe("mean prototype", function () {

  load("javascripts/mean.js");

  describe("Math.prototype.mean", function () {
    it("returns the average for an array of numbers", function () {
      expect(Math.mean([1,2,3,4,5,12])).toEqual(4.5);
    });

    it("returns 0 for empty arrays", function () {
      expect(Math.mean([])).toEqual(0);
    });
  });
});
</pre>
        </section>
      </article>

      <article>
      <h3>
        RKelly generates:
      </h3>
      <pre>
                         // mean.js

_jcov_line('mean.js', 2); Math.mean = function (array) {
_jcov_line('mean.js', 3);   var sum = 0;
_jcov_line('mean.js', 4);   for (var i = 0; i < array.length; i++) {
_jcov_line('mean.js', 5);     sum += array[i];
                           }

_jcov_line('mean.js', 8);   return sum / array.length;
                         };
      </pre>
      </article>

      <article>
        <h3>
          Configuration!
          <br>
          jcov.yml
        </h3>
        <pre>
-----
threshold:            75.2
threshold_must_match: true
test_directory:       tests
source_directory:     javascripts
test_runner:          jasmine/runner.js
error_field:          results
ignore:
  - vendor
  - lib
  - foo/bar/baz/wurble.js
        </pre>
      </article>

      <article>
        <h2>
          Runner file
        </h2>
        <h3>
          where the rubber meets the road
        </h3>
      </article>

      <article>
        <h3>
          JCov Javascript API
        </h3>
        <pre>

// Javascript Land

JCov.tests   // An Array of tests to execute.
JCov.config  // The configuration loaded from jcov.yaml.
JCov.options // Passed in command line options.

print()      // Print to the console.
println()    // Print to the console with a carriage return.
load()       // load and execute the given file.
readFile()   // load file and return it as a string.
putc()       // Print a single character to the console.

        </pre>
      </article>

      <article>
        <h3>
          What about the browser?
        </h3>
        <h2>
          env.js
        </h2>
      </article>

      <article>
        <h2>
          And now for the live portion of our program...
        </h2>
      </article>

      <article>
        <h1>
          Thank you!
        </h1>
        <h2>
          gem install jcov
        </h2>
        <h2>
          <a href="https://github.com/yp-engineering/jcov">https://github.com/yp-engineering/jcov</a>
        </h2>
      </article>

    </section>

  </body>
</html>
